name: Torrent Download with Aria2 (No Seeding)

on:
  workflow_dispatch:

jobs:
  download:
    runs-on: ubuntu-latest

    steps:
      - name: Install Aria2
        run: |
          sudo apt-get update
          sudo apt-get install -y aria2

      - name: Create Directory for Downloads
        run: |
          mkdir -p ./torrent/downloads  # Create a download directory

      - name: Download Torrent
        id: download_torrent  # Add an ID to access in later steps
        run: |
          echo "Starting torrent download without seeding..."
          aria2c --dir=~/torrent_downloads --seed-time=0 "magnet:?xt=urn:btih:166C02A40FDD6B5881FD8CE6B682C00B3510F60A&dn=The.Day.of.the.Jackal.S01E05.1080p.x265-ELiTE&tr=udp%3A%2F%2Ftracker.torrent.eu.org%3A451%2Fannounce&tr=udp%3A%2F%2Fopen.stealth.si%3A80%2Fannounce&tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337%2Fannounce&tr=udp%3A%2F%2Fexplodie.org%3A6969%2Fannounce&tr=udp%3A%2F%2Ftracker.tiny-vps.com%3A6969%2Fannounce&tr=udp%3A%2F%2Fodd-hd.fr%3A6969%2Fannounce&tr=http%3A%2F%2Ftracker.files.fm%3A6969%2Fannounce&tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337%2Fannounce&tr=http%3A%2F%2Ftracker.openbittorrent.com%3A80%2Fannounce&tr=udp%3A%2F%2Fopentracker.i2p.rocks%3A6969%2Fannounce&tr=udp%3A%2F%2Ftracker.internetwarriors.net%3A1337%2Fannounce&tr=udp%3A%2F%2Ftracker.leechers-paradise.org%3A6969%2Fannounce&tr=udp%3A%2F%2Fcoppersurfer.tk%3A6969%2Fannounce&tr=udp%3A%2F%2Ftracker.zer0day.to%3A1337%2Fannounce"
          
      - name: Verify Downloaded Files
        run: |
          echo "Verifying downloaded files..."
          ls -la ./torrent/downloads/The.Day.of.the.Jackal.S01E05.1080p.x265-ELiTE/  # List files in the download directory

      - name: Upload Downloaded Files
        uses: actions/upload-artifact@v3
        with:
          name: downloaded-files
          path: ./torrent/downloads/The.Day.of.the.Jackal.S01E05.1080p.x265-ELiTE  # Upload all files in the download directory
